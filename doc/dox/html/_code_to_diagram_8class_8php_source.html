<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>CodeToDiagram: components/codeToDiagram/CodeToDiagram.class.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_5952676466667a7dac4d2b5465cc4c58.html">components</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_a48b134e90401494c1d7e6cb884856d0.html">codeToDiagram</a>
  </div>
</div>
<div class="contents">
<h1>CodeToDiagram.class.php</h1><a href="_code_to_diagram_8class_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00014"></a><a class="code" href="class_code_to_diagram.html">00014</a> <span class="keyword">class </span><a class="code" href="class_code_to_diagram.html">CodeToDiagram</a>
<a name="l00015"></a>00015 {
<a name="l00021"></a><a class="code" href="class_code_to_diagram.html#8e74bce736504d1da15b87b4da6da83d">00021</a>     <span class="keyword">protected</span> <a class="code" href="class_code_to_diagram.html#8e74bce736504d1da15b87b4da6da83d">$arrFiles</a> = array();
<a name="l00022"></a>00022 
<a name="l00028"></a><a class="code" href="class_code_to_diagram.html#8e7e7887be9a69348bcb5ec86877ac24">00028</a>     <span class="keyword">protected</span> <a class="code" href="class_code_to_diagram.html#8e7e7887be9a69348bcb5ec86877ac24">$booStart</a> = <span class="keyword">false</span>;
<a name="l00029"></a>00029 
<a name="l00035"></a><a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">00035</a>     <span class="keyword">protected</span> <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> = null;
<a name="l00036"></a>00036 
<a name="l00042"></a><a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">00042</a>     <span class="keyword">protected</span> <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> = null;
<a name="l00043"></a>00043 
<a name="l00049"></a><a class="code" href="class_code_to_diagram.html#d609791f2fec4dc724795fce09b4fbb9">00049</a>     <span class="keyword">protected</span> <a class="code" href="class_code_to_diagram.html#d609791f2fec4dc724795fce09b4fbb9">$strOutputType</a> = self::OUTPUT_TYPE_SCREEN;
<a name="l00050"></a>00050 
<a name="l00056"></a><a class="code" href="class_code_to_diagram.html#80901f2e74e755896ca3914ff039dab9">00056</a>     <span class="keyword">protected</span> <a class="code" href="class_code_to_diagram.html#80901f2e74e755896ca3914ff039dab9">$strCallerPath</a>;
<a name="l00057"></a>00057 
<a name="l00063"></a><a class="code" href="class_code_to_diagram.html#5fa653f11488edb1d638093f347807f5">00063</a>     <span class="keyword">protected</span> <a class="code" href="class_code_to_diagram.html#5fa653f11488edb1d638093f347807f5">$strPublicPath</a>;
<a name="l00064"></a>00064     
<a name="l00070"></a><a class="code" href="class_code_to_diagram.html#917d057900327b25608ed26c927eac3b">00070</a>     <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="class_code_to_diagram.html#917d057900327b25608ed26c927eac3b">$objInstance</a>;
<a name="l00071"></a>00071 
<a name="l00078"></a><a class="code" href="class_code_to_diagram.html#2cec53b0c2258fcbb3ecefc5d8788fb0">00078</a>     <span class="keyword">const</span> <a class="code" href="class_code_to_diagram.html#2cec53b0c2258fcbb3ecefc5d8788fb0">RUN_IN_FILES</a> = <span class="keyword">true</span>;
<a name="l00079"></a>00079 
<a name="l00088"></a><a class="code" href="class_code_to_diagram.html#2832af3e5aa01936d5bcec53d500e7ab">00088</a>     <span class="keyword">const</span> <a class="code" href="class_code_to_diagram.html#2832af3e5aa01936d5bcec53d500e7ab">REMOVE_FILES</a> = <span class="keyword">true</span>;
<a name="l00089"></a>00089 
<a name="l00094"></a><a class="code" href="class_code_to_diagram.html#acb520be3f3e0ee2cd05b90c8d9887a6">00094</a>     <span class="keyword">const</span> <a class="code" href="class_code_to_diagram.html#acb520be3f3e0ee2cd05b90c8d9887a6">CODE_TO_DIAGRAM_CLASS_PREFIX</a> = <span class="stringliteral">"CTD"</span>;
<a name="l00095"></a>00095 
<a name="l00096"></a><a class="code" href="class_code_to_diagram.html#746cadd14bdda9d3c0ae3c4433bc2478">00096</a>     <span class="keyword">const</span> <a class="code" href="class_code_to_diagram.html#746cadd14bdda9d3c0ae3c4433bc2478">OUTPUT_TYPE_SCREEN</a> = <span class="stringliteral">"screen"</span>;
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="class_code_to_diagram.html#7b2a676828728d3c85df18eebb42854f">00098</a>     <span class="keyword">const</span> <a class="code" href="class_code_to_diagram.html#7b2a676828728d3c85df18eebb42854f">OUTPUT_TYPE_STRING</a> = <span class="stringliteral">"string"</span>;
<a name="l00099"></a>00099 
<a name="l00100"></a><a class="code" href="class_code_to_diagram.html#6432f4d95031e2666449bb92c20f7d7e">00100</a>     <span class="keyword">const</span> <a class="code" href="class_code_to_diagram.html#6432f4d95031e2666449bb92c20f7d7e">OUTPUT_TYPE_FILE</a> = <span class="stringliteral">"file"</span>;
<a name="l00101"></a>00101 
<a name="l00102"></a><a class="code" href="class_code_to_diagram.html#04b49bbd2c3e914e22a80db89997dd67">00102</a>     <span class="keyword">const</span> <a class="code" href="class_code_to_diagram.html#04b49bbd2c3e914e22a80db89997dd67">OUTPUT_TYPE_XML</a> = <span class="stringliteral">"xml"</span>;
<a name="l00103"></a>00103 
<a name="l00129"></a><a class="code" href="class_code_to_diagram.html#b16859ecf5ce7dead56b77cbef45c8bd">00129</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#b16859ecf5ce7dead56b77cbef45c8bd">setOutputType</a>( $strType )
<a name="l00130"></a>00130     {
<a name="l00131"></a>00131         <span class="keywordflow">switch</span>( $strType )
<a name="l00132"></a>00132         {
<a name="l00133"></a>00133             <span class="keywordflow">case</span> <a class="code" href="class_code_to_diagram.html#746cadd14bdda9d3c0ae3c4433bc2478">CodeToDiagram::OUTPUT_TYPE_SCREEN</a>:
<a name="l00134"></a>00134             <span class="keywordflow">case</span> <a class="code" href="class_code_to_diagram.html#7b2a676828728d3c85df18eebb42854f">CodeToDiagram::OUTPUT_TYPE_STRING</a>:
<a name="l00135"></a>00135             <span class="keywordflow">case</span> <a class="code" href="class_code_to_diagram.html#6432f4d95031e2666449bb92c20f7d7e">CodeToDiagram::OUTPUT_TYPE_FILE</a> :
<a name="l00136"></a>00136             <span class="keywordflow">case</span> <a class="code" href="class_code_to_diagram.html#04b49bbd2c3e914e22a80db89997dd67">CodeToDiagram::OUTPUT_TYPE_XML</a> :
<a name="l00137"></a>00137             {
<a name="l00138"></a>00138                 $this-&gt;strOutputType = $strType;
<a name="l00139"></a>00139                 <span class="keywordflow">break</span>;
<a name="l00140"></a>00140             }
<a name="l00141"></a>00141             <span class="keywordflow">default</span>:
<a name="l00142"></a>00142             {
<a name="l00143"></a>00143                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_code_to_diagram_exception.html">CodeToDiagramException</a>( <span class="stringliteral">"Invalid output type. ('"</span> . $strType . <span class="stringliteral">"')"</span> );
<a name="l00144"></a>00144                 <span class="keywordflow">break</span>;
<a name="l00145"></a>00145             }
<a name="l00146"></a>00146         }
<a name="l00147"></a>00147         <span class="keywordflow">return</span> $this;
<a name="l00148"></a>00148     }
<a name="l00149"></a>00149 
<a name="l00172"></a><a class="code" href="class_code_to_diagram.html#04fb2bc09c8adb24bf9c585bb4dee691">00172</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#04fb2bc09c8adb24bf9c585bb4dee691">getOutputType</a>()
<a name="l00173"></a>00173     {
<a name="l00174"></a>00174         <span class="keywordflow">return</span> $this-&gt;strOutputType;
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176 
<a name="l00192"></a><a class="code" href="class_code_to_diagram.html#abea252aaf2bf265677fdc29ed4e3fa1">00192</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_code_to_diagram.html#abea252aaf2bf265677fdc29ed4e3fa1">hasInstance</a>()
<a name="l00193"></a>00193     {
<a name="l00194"></a>00194         <span class="keywordflow">return</span> ( self::$objInstance !== null );
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196 
<a name="l00207"></a><a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">00207</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">getInstance</a>()
<a name="l00208"></a>00208     {
<a name="l00209"></a>00209         <span class="keywordflow">if</span>( self::$objInstance === null )
<a name="l00210"></a>00210         {
<a name="l00211"></a>00211             self::$objInstance = <span class="keyword">new</span> <a class="code" href="class_code_to_diagram.html">CodeToDiagram</a>();
<a name="l00212"></a>00212         }
<a name="l00213"></a>00213         <span class="keywordflow">return</span> self::$objInstance;
<a name="l00214"></a>00214     }
<a name="l00215"></a>00215 
<a name="l00232"></a><a class="code" href="class_code_to_diagram.html#2aeb1b7ec5740287e34c15209fab8b78">00232</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#2aeb1b7ec5740287e34c15209fab8b78">setStarted</a>( $booStarted )
<a name="l00233"></a>00233     {
<a name="l00234"></a>00234         $this-&gt;booStart = $booStarted;
<a name="l00235"></a>00235         <span class="keywordflow">return</span> $this;
<a name="l00236"></a>00236     }
<a name="l00237"></a>00237 
<a name="l00251"></a><a class="code" href="class_code_to_diagram.html#177cc628e31a482237aed841078a122f">00251</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#177cc628e31a482237aed841078a122f">getStarted</a>()
<a name="l00252"></a>00252     {
<a name="l00253"></a>00253         <span class="keywordflow">return</span> $this-&gt;booStart;
<a name="l00254"></a>00254     }
<a name="l00255"></a>00255 
<a name="l00268"></a><a class="code" href="class_code_to_diagram.html#21031a5ba5b1de38288f09247a4bc413">00268</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#21031a5ba5b1de38288f09247a4bc413">setFileFrom</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> )
<a name="l00269"></a>00269     {
<a name="l00270"></a>00270         $this-&gt;strFileFrom = <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>;
<a name="l00271"></a>00271         <span class="keywordflow">return</span> $this;
<a name="l00272"></a>00272     }
<a name="l00273"></a>00273 
<a name="l00284"></a><a class="code" href="class_code_to_diagram.html#8fea886bcd0b31bd46eca66b26dd18b8">00284</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#8fea886bcd0b31bd46eca66b26dd18b8">getFileFrom</a>()
<a name="l00285"></a>00285     {
<a name="l00286"></a>00286         <span class="keywordflow">return</span> $this-&gt;strFileFrom;
<a name="l00287"></a>00287     }
<a name="l00288"></a>00288 
<a name="l00299"></a><a class="code" href="class_code_to_diagram.html#14fd91733dbcc57d74df9c22e0c84e72">00299</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#14fd91733dbcc57d74df9c22e0c84e72">setFileName</a>( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> )
<a name="l00300"></a>00300     {
<a name="l00301"></a>00301         $this-&gt;strFileName = <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a>;
<a name="l00302"></a>00302         <span class="keywordflow">return</span> $this;
<a name="l00303"></a>00303     }
<a name="l00304"></a>00304 
<a name="l00314"></a><a class="code" href="class_code_to_diagram.html#fdeebfe3fcf5806fc79c074a6a3a6eb1">00314</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#fdeebfe3fcf5806fc79c074a6a3a6eb1">getFileName</a>()
<a name="l00315"></a>00315     {
<a name="l00316"></a>00316         <span class="keywordflow">return</span> $this-&gt;strFileName;
<a name="l00317"></a>00317     }
<a name="l00318"></a>00318     
<a name="l00325"></a><a class="code" href="class_code_to_diagram.html#bdded6991e674ce82f04f701972ebf9f">00325</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#bdded6991e674ce82f04f701972ebf9f">setCallerPath</a>( <a class="code" href="class_code_to_diagram.html#80901f2e74e755896ca3914ff039dab9">$strCallerPath</a> )
<a name="l00326"></a>00326     {
<a name="l00327"></a>00327         $this-&gt;strCallerPath = <a class="code" href="class_code_to_diagram.html#80901f2e74e755896ca3914ff039dab9">$strCallerPath</a>;
<a name="l00328"></a>00328         <span class="keywordflow">return</span> $this;
<a name="l00329"></a>00329     }
<a name="l00330"></a>00330     
<a name="l00336"></a><a class="code" href="class_code_to_diagram.html#a8c839c9d33ebad153541a31ffc7ef3e">00336</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#a8c839c9d33ebad153541a31ffc7ef3e">getCallerPath</a>()
<a name="l00337"></a>00337     {
<a name="l00338"></a>00338         <span class="keywordflow">return</span> $this-&gt;strCallerPath;
<a name="l00339"></a>00339     }
<a name="l00340"></a>00340     
<a name="l00347"></a><a class="code" href="class_code_to_diagram.html#261f2bb173e655f2ead64eda4c29e76a">00347</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#261f2bb173e655f2ead64eda4c29e76a">setPublicPath</a>( <a class="code" href="class_code_to_diagram.html#5fa653f11488edb1d638093f347807f5">$strPublicPath</a> )
<a name="l00348"></a>00348     {
<a name="l00349"></a>00349         $this-&gt;strPublicPath = <a class="code" href="class_code_to_diagram.html#5fa653f11488edb1d638093f347807f5">$strPublicPath</a>;
<a name="l00350"></a>00350         <span class="keywordflow">return</span> $this;
<a name="l00351"></a>00351     }
<a name="l00352"></a>00352     
<a name="l00358"></a><a class="code" href="class_code_to_diagram.html#74df99a19bc54d630a15e1778144eb31">00358</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#74df99a19bc54d630a15e1778144eb31">getPublicPath</a>()
<a name="l00359"></a>00359     {
<a name="l00360"></a>00360         <span class="keywordflow">return</span> $this-&gt;strPublicPath;    
<a name="l00361"></a>00361     }
<a name="l00362"></a>00362     
<a name="l00370"></a><a class="code" href="class_code_to_diagram.html#f8fa59992209e36dccb3eefb0f75531f">00370</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#f8fa59992209e36dccb3eefb0f75531f">start</a>()
<a name="l00371"></a>00371     {
<a name="l00372"></a>00372         <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">CodeInstrumentationReceiver::getInstance</a>()-&gt;setPublicPath( $this-&gt;<a class="code" href="class_code_to_diagram.html#74df99a19bc54d630a15e1778144eb31">getPublicPath</a>() );
<a name="l00373"></a>00373         <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">CodeInstrumentationReceiver::getInstance</a>()-&gt;setCallerPath( $this-&gt;<a class="code" href="class_code_to_diagram.html#a8c839c9d33ebad153541a31ffc7ef3e">getCallerPath</a>() );
<a name="l00374"></a>00374         
<a name="l00375"></a>00375         <span class="keywordflow">if</span>( $this-&gt;<a class="code" href="class_code_to_diagram.html#177cc628e31a482237aed841078a122f">getStarted</a>() )
<a name="l00376"></a>00376         {
<a name="l00377"></a>00377             <span class="keywordflow">return</span> $this;
<a name="l00378"></a>00378         }
<a name="l00379"></a>00379         <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">CodeInstrumentationReceiver::getInstance</a>()-&gt;restart();
<a name="l00380"></a>00380         $this-&gt;<a class="code" href="class_code_to_diagram.html#f51b27f0764b66ac0d52a47399286180">CodeToDiagramRequireOnce</a>($this-&gt;<a class="code" href="class_code_to_diagram.html#8fea886bcd0b31bd46eca66b26dd18b8">getFileFrom</a>() , $this-&gt;<a class="code" href="class_code_to_diagram.html#8fea886bcd0b31bd46eca66b26dd18b8">getFileFrom</a>() );
<a name="l00381"></a>00381         exit();
<a name="l00382"></a>00382 
<a name="l00383"></a>00383         <span class="comment">// just to safety //</span>
<a name="l00384"></a>00384         <span class="keywordflow">return</span> $this;
<a name="l00385"></a>00385     }
<a name="l00386"></a>00386 
<a name="l00394"></a><a class="code" href="class_code_to_diagram.html#c8de9e38ce27c87f710dff42a13455cf">00394</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#c8de9e38ce27c87f710dff42a13455cf">restart</a>()
<a name="l00395"></a>00395     {
<a name="l00396"></a>00396         <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">CodeInstrumentationReceiver::getInstance</a>()-&gt;restart();
<a name="l00397"></a>00397         <span class="keywordflow">return</span> $this;
<a name="l00398"></a>00398     }
<a name="l00399"></a>00399 
<a name="l00420"></a><a class="code" href="class_code_to_diagram.html#fc8a3c62679cf00ade9f15fb2a6d6132">00420</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#fc8a3c62679cf00ade9f15fb2a6d6132">save</a>()
<a name="l00421"></a>00421     {
<a name="l00422"></a>00422         $strReturn = <span class="stringliteral">""</span>;
<a name="l00423"></a>00423 
<a name="l00424"></a>00424         <span class="keywordflow">if</span>( $this-&gt;<a class="code" href="class_code_to_diagram.html#177cc628e31a482237aed841078a122f">getStarted</a>() )
<a name="l00425"></a>00425         {
<a name="l00426"></a>00426                 <a class="code" href="sequence_8php.html#eefa469c1b13fe1fec040c910b720034">$objXmlSequence</a> = <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">CodeInstrumentationReceiver::getInstance</a>()-&gt;getXmlSequence();
<a name="l00427"></a>00427 
<a name="l00428"></a>00428             <span class="keywordflow">switch</span>( $this-&gt;<a class="code" href="class_code_to_diagram.html#04fb2bc09c8adb24bf9c585bb4dee691">getOutputType</a>() )
<a name="l00429"></a>00429             {
<a name="l00430"></a>00430                 <span class="keywordflow">case</span> self::OUTPUT_TYPE_SCREEN:
<a name="l00431"></a>00431                 {
<a name="l00432"></a>00432                         $strDiagram = <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">XmlSequencePrinterDiagram::getInstance</a>()-&gt;perform( <a class="code" href="sequence_8php.html#eefa469c1b13fe1fec040c910b720034">$objXmlSequence</a> );
<a name="l00433"></a>00433                     print $strDiagram;
<a name="l00434"></a>00434                     <span class="keywordflow">break</span>;
<a name="l00435"></a>00435                 }
<a name="l00436"></a>00436                 <span class="keywordflow">case</span> self::OUTPUT_TYPE_STRING:
<a name="l00437"></a>00437                 {
<a name="l00438"></a>00438                         $strDiagram = <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">XmlSequencePrinterDiagram::getInstance</a>()-&gt;perform( <a class="code" href="sequence_8php.html#eefa469c1b13fe1fec040c910b720034">$objXmlSequence</a> );
<a name="l00439"></a>00439                         $strReturn = $strDiagram;
<a name="l00440"></a>00440                     <span class="keywordflow">break</span>;
<a name="l00441"></a>00441                 }
<a name="l00442"></a>00442                 <span class="keywordflow">case</span> self::OUTPUT_TYPE_FILE:
<a name="l00443"></a>00443                 {
<a name="l00444"></a>00444                         $strDiagram = <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">XmlSequencePrinterDiagram::getInstance</a>()-&gt;perform( <a class="code" href="sequence_8php.html#eefa469c1b13fe1fec040c910b720034">$objXmlSequence</a> );
<a name="l00445"></a>00445                         file_put_contents( $this-&gt;<a class="code" href="class_code_to_diagram.html#fdeebfe3fcf5806fc79c074a6a3a6eb1">getFileName</a>() , $strDiagram );
<a name="l00446"></a>00446                     <span class="keywordflow">break</span>;
<a name="l00447"></a>00447                 }
<a name="l00448"></a>00448                 <span class="keywordflow">case</span> self::OUTPUT_TYPE_XML:
<a name="l00449"></a>00449                 {
<a name="l00450"></a>00450                         $strReturn = <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">XmlSequencePrinterXml::getInstance</a>()-&gt;perform( <a class="code" href="sequence_8php.html#eefa469c1b13fe1fec040c910b720034">$objXmlSequence</a> );
<a name="l00451"></a>00451                     <span class="keywordflow">break</span>;
<a name="l00452"></a>00452                 }
<a name="l00453"></a>00453                 <span class="keywordflow">default</span>:
<a name="l00454"></a>00454                 {
<a name="l00455"></a>00455                     <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_code_to_diagram_exception.html">CodeToDiagramException</a>( <span class="stringliteral">"Invalid output type ({$this-&gt;getOutputType()})"</span> );
<a name="l00456"></a>00456                     <span class="keywordflow">break</span>;
<a name="l00457"></a>00457                 }
<a name="l00458"></a>00458             }
<a name="l00459"></a>00459             <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">CodeInstrumentationReceiver::getInstance</a>()-&gt;restart();
<a name="l00460"></a>00460         }
<a name="l00461"></a>00461         <span class="keywordflow">return</span> $strReturn;
<a name="l00462"></a>00462     }
<a name="l00463"></a>00463 
<a name="l00467"></a><a class="code" href="class_code_to_diagram.html#421831a265621325e1fdd19aace0c758">00467</a>     <span class="keyword">public</span> function  <a class="code" href="class_code_to_diagram.html#421831a265621325e1fdd19aace0c758">__destruct</a>() {
<a name="l00468"></a>00468 
<a name="l00469"></a>00469        $this-&gt;<a class="code" href="class_code_to_diagram.html#fc8a3c62679cf00ade9f15fb2a6d6132">save</a>();
<a name="l00470"></a>00470     }
<a name="l00471"></a>00471 
<a name="l00478"></a><a class="code" href="class_code_to_diagram.html#f20af03286d73d30d03d593cc88babd9">00478</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_code_to_diagram.html#f20af03286d73d30d03d593cc88babd9">init</a>( $strFile )
<a name="l00479"></a>00479     {
<a name="l00480"></a>00480         <span class="keywordflow">if</span>( self::getInstance()-&gt;<a class="code" href="class_code_to_diagram.html#177cc628e31a482237aed841078a122f">getStarted</a>() == <span class="keyword">false</span> )
<a name="l00481"></a>00481         {
<a name="l00482"></a>00482             <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">self::getInstance</a>()-&gt;setFileFrom( $strFile );
<a name="l00483"></a>00483         }
<a name="l00484"></a>00484         <span class="keywordflow">return</span> <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">self::getInstance</a>();
<a name="l00485"></a>00485     }
<a name="l00486"></a>00486 
<a name="l00495"></a><a class="code" href="class_code_to_diagram.html#ba72ffc8b4aeabbd33a7206c395ede18">00495</a>     <span class="keyword">protected</span> function <a class="code" href="class_code_to_diagram.html#ba72ffc8b4aeabbd33a7206c395ede18">fixFileName</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strFile )
<a name="l00496"></a>00496     {
<a name="l00497"></a>00497         <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> = str_replace( <span class="charliteral">'/'</span>, <span class="charliteral">'\\'</span>, <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> );
<a name="l00498"></a>00498         $strFile = str_replace( <span class="charliteral">'/'</span>, <span class="charliteral">'\\'</span>, $strFile );
<a name="l00499"></a>00499         $strFilePath = substr( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> ,  0 , -(strlen(basename(<a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> ) ) ) );
<a name="l00500"></a>00500         $strFile = $strFilePath . $strFile;
<a name="l00501"></a>00501 
<a name="l00502"></a>00502         <span class="keywordflow">return</span> $strFile;
<a name="l00503"></a>00503     }
<a name="l00504"></a>00504 
<a name="l00512"></a><a class="code" href="class_code_to_diagram.html#5ddaedacfee2008cacee41a47363e7fa">00512</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#5ddaedacfee2008cacee41a47363e7fa">addFile</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strFile )
<a name="l00513"></a>00513     {
<a name="l00514"></a>00514         $strFile = $this-&gt;<a class="code" href="class_code_to_diagram.html#ba72ffc8b4aeabbd33a7206c395ede18">fixFileName</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strFile );
<a name="l00515"></a>00515 
<a name="l00516"></a>00516         $this-&gt;arrFiles[] = $strFile;
<a name="l00517"></a>00517 
<a name="l00518"></a>00518         <span class="keywordflow">return</span> $this;
<a name="l00519"></a>00519     }
<a name="l00520"></a>00520 
<a name="l00528"></a><a class="code" href="class_code_to_diagram.html#e4efdbde4a95c06ac22d842b8d56a1de">00528</a>     <span class="keyword">protected</span> function <a class="code" href="class_code_to_diagram.html#e4efdbde4a95c06ac22d842b8d56a1de">hasFile</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> , $strFile )
<a name="l00529"></a>00529     {
<a name="l00530"></a>00530         <span class="keywordflow">return</span> in_array( $strFile ,  $this-&gt;arrFiles );
<a name="l00531"></a>00531     }
<a name="l00532"></a>00532 
<a name="l00541"></a><a class="code" href="class_code_to_diagram.html#f51b27f0764b66ac0d52a47399286180">00541</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#f51b27f0764b66ac0d52a47399286180">CodeToDiagramRequireOnce</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strFile )
<a name="l00542"></a>00542     {        
<a name="l00543"></a>00543         $arrCodeToDiagramBackTrace = debug_backtrace();
<a name="l00544"></a>00544 
<a name="l00545"></a>00545         <span class="keywordflow">if</span>( !$this-&gt;<a class="code" href="class_code_to_diagram.html#e4efdbde4a95c06ac22d842b8d56a1de">hasFile</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> , $strFile ) )
<a name="l00546"></a>00546         {
<a name="l00547"></a>00547             $this-&gt;<a class="code" href="class_code_to_diagram.html#14610b43e210992a460d7eebbbe3c167">CodeToDiagramRequire</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strFile );
<a name="l00548"></a>00548         }
<a name="l00549"></a>00549         <span class="keywordflow">return</span> $this;
<a name="l00550"></a>00550     }
<a name="l00551"></a>00551 
<a name="l00560"></a><a class="code" href="class_code_to_diagram.html#ebab1d697349f315022eeaf64c792172">00560</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#ebab1d697349f315022eeaf64c792172">CodeToDiagramIncludeOnce</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strFile )
<a name="l00561"></a>00561     {
<a name="l00562"></a>00562         <span class="keywordflow">if</span>( !$this-&gt;<a class="code" href="class_code_to_diagram.html#e4efdbde4a95c06ac22d842b8d56a1de">hasFile</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> , $strFile ) )
<a name="l00563"></a>00563         {
<a name="l00564"></a>00564             $this-&gt;<a class="code" href="class_code_to_diagram.html#ebab1d697349f315022eeaf64c792172">CodeToDiagramIncludeOnce</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> , $strFile );
<a name="l00565"></a>00565         }
<a name="l00566"></a>00566         <span class="keywordflow">return</span> $this;
<a name="l00567"></a>00567     }
<a name="l00568"></a>00568 
<a name="l00577"></a><a class="code" href="class_code_to_diagram.html#14610b43e210992a460d7eebbbe3c167">00577</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#14610b43e210992a460d7eebbbe3c167">CodeToDiagramRequire</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strFile )
<a name="l00578"></a>00578     {
<a name="l00579"></a>00579         $this-&gt;<a class="code" href="class_code_to_diagram.html#46cc51b5da83819fed739bd1d8b1d2ca">loadFile</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> , $strFile );
<a name="l00580"></a>00580         <span class="keywordflow">return</span> $this;
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582 
<a name="l00591"></a><a class="code" href="class_code_to_diagram.html#cbf7ee26453936ec8211ff606f3ed6d3">00591</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#cbf7ee26453936ec8211ff606f3ed6d3">CodeToDiagramInclude</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strFile )
<a name="l00592"></a>00592     {
<a name="l00593"></a>00593         $this-&gt;<a class="code" href="class_code_to_diagram.html#46cc51b5da83819fed739bd1d8b1d2ca">loadFile</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a> , $strFile );
<a name="l00594"></a>00594         <span class="keywordflow">return</span> $this;
<a name="l00595"></a>00595     }
<a name="l00596"></a>00596 
<a name="l00605"></a><a class="code" href="class_code_to_diagram.html#d18cd8b4121a7cb96ce7e89a88eef425">00605</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#d18cd8b4121a7cb96ce7e89a88eef425">CodeToDiagramExit</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strMessage = <span class="stringliteral">''</span>)
<a name="l00606"></a>00606     {
<a name="l00607"></a>00607         print <span class="stringliteral">"Exit called into $strFileFrom ($strMessage ) "</span>;
<a name="l00608"></a>00608         exit();
<a name="l00609"></a>00609     }
<a name="l00610"></a>00610 
<a name="l00619"></a><a class="code" href="class_code_to_diagram.html#4ae436da9e8fe29b6ce2aa543212fa72">00619</a>     <span class="keyword">protected</span> function <a class="code" href="class_code_to_diagram.html#4ae436da9e8fe29b6ce2aa543212fa72">convertFileContent</a>( $strContentFile , $strFile , $strFullFile )
<a name="l00620"></a>00620     {
<a name="l00621"></a>00621         <span class="keywordflow">if</span>( self::getInstance()-&gt;<a class="code" href="class_code_to_diagram.html#177cc628e31a482237aed841078a122f">getStarted</a>() == <span class="keyword">false</span> )
<a name="l00622"></a>00622         {
<a name="l00623"></a>00623             <a class="code" href="class_code_to_diagram.html#c93fbec81f07e5d15f80db907e63dc10">self::getInstance</a>()-&gt;setStarted( <span class="keyword">true</span> );
<a name="l00624"></a>00624             $strContentFile = preg_replace(<span class="stringliteral">'/require_once/'</span>, <span class="stringliteral">'//require_once'</span>, $strContentFile, 1);
<a name="l00625"></a>00625         }
<a name="l00626"></a>00626 
<a name="l00627"></a>00627         $strContentFile = str_replace(
<a name="l00628"></a>00628             Array(
<a name="l00629"></a>00629                 <span class="stringliteral">'require_once('</span> ,
<a name="l00630"></a>00630                 <span class="stringliteral">'require('</span> ,
<a name="l00631"></a>00631                 <span class="stringliteral">'include('</span> ,
<a name="l00632"></a>00632                 <span class="stringliteral">'include_once('</span>,
<a name="l00633"></a>00633                 <span class="stringliteral">'exit()'</span>,
<a name="l00634"></a>00634                 <span class="stringliteral">'exit('</span>,
<a name="l00635"></a>00635                 <span class="stringliteral">'__FILE__'</span>,
<a name="l00636"></a>00636             ),
<a name="l00637"></a>00637             Array(
<a name="l00638"></a>00638                 <span class="stringliteral">'CodeToDiagram::getInstance()-&gt;CodeToDiagramRequireOnce("'</span>. $strFile . <span class="stringliteral">'",'</span> ,
<a name="l00639"></a>00639                 <span class="stringliteral">'CodeToDiagram::getInstance()-&gt;CodeToDiagramRequire("'</span>. $strFile . <span class="stringliteral">'",'</span> ,
<a name="l00640"></a>00640                 <span class="stringliteral">'CodeToDiagram::getInstance()-&gt;CodeToDiagramInclude("'</span>. $strFile . <span class="stringliteral">'",'</span> ,
<a name="l00641"></a>00641                 <span class="stringliteral">'CodeToDiagram::getInstance()-&gt;CodeToDiagramIncludeOnce("'</span>. $strFile . <span class="stringliteral">'",'</span>,
<a name="l00642"></a>00642                 <span class="stringliteral">'CodeToDiagram::getInstance()-&gt;CodeToDiagramExit("'</span>. $strFile . <span class="stringliteral">'")'</span>,
<a name="l00643"></a>00643                 <span class="stringliteral">'CodeToDiagram::getInstance()-&gt;CodeToDiagramExit("'</span>. $strFile . <span class="stringliteral">'",'</span>,
<a name="l00644"></a>00644                 <span class="charliteral">'"'</span> . $this-&gt;<a class="code" href="class_code_to_diagram.html#a8c839c9d33ebad153541a31ffc7ef3e">getCallerPath</a>() . $strFullFile . <span class="charliteral">'"'</span>,
<a name="l00645"></a>00645             ),
<a name="l00646"></a>00646             $strContentFile
<a name="l00647"></a>00647         );
<a name="l00648"></a>00648 
<a name="l00649"></a>00649         <span class="keywordflow">return</span> $strContentFile;
<a name="l00650"></a>00650     }
<a name="l00651"></a>00651 
<a name="l00659"></a><a class="code" href="class_code_to_diagram.html#2d9bbf465fc0ace643bef01690a3336a">00659</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#2d9bbf465fc0ace643bef01690a3336a">codeInstrumentationLine</a>( $strLine, $strTextSearch )
<a name="l00660"></a>00660     {
<a name="l00661"></a>00661         $arrResult = array();
<a name="l00662"></a>00662 
<a name="l00663"></a>00663         <span class="keywordflow">if</span>(  substr( strtolower( trim( $strLine ) ) , 0 , strlen( $strTextSearch ) ) == $strTextSearch )
<a name="l00664"></a>00664         {
<a name="l00665"></a>00665             $strLine = trim( $strLine );
<a name="l00666"></a>00666             $strBefore = substr( $strLine , 0 , strlen( $strTextSearch ) );
<a name="l00667"></a>00667             $strAfter = substr( $strLine , strlen( $strTextSearch ) );
<a name="l00668"></a>00668             $arrWords = explode( <span class="stringliteral">" "</span> , $strAfter );
<a name="l00669"></a>00669 
<a name="l00670"></a>00670             $strOldClassName = $arrWords[0];
<a name="l00671"></a>00671             $strNewClassName = self::CODE_TO_DIAGRAM_CLASS_PREFIX . $strOldClassName;
<a name="l00672"></a>00672 
<a name="l00673"></a>00673             $arrWords[0] = $strNewClassName;
<a name="l00674"></a>00674             $strAfter = implode( <span class="stringliteral">" "</span> , $arrWords );
<a name="l00675"></a>00675             $strLine = $strBefore . $strAfter;
<a name="l00676"></a>00676 
<a name="l00677"></a>00677             $arrResult[ <span class="stringliteral">"line"</span> ] = $strLine;
<a name="l00678"></a>00678             $arrResult[ <span class="stringliteral">"class_old"</span> ] = $strOldClassName;
<a name="l00679"></a>00679             $arrResult[ <span class="stringliteral">"class_new"</span> ] = $strNewClassName;
<a name="l00680"></a>00680 
<a name="l00681"></a>00681         }
<a name="l00682"></a>00682         <span class="keywordflow">return</span> $arrResult;
<a name="l00683"></a>00683     }
<a name="l00684"></a>00684 
<a name="l00693"></a><a class="code" href="class_code_to_diagram.html#ec172f2211fc097efa89f3546c0bd308">00693</a>     <span class="keyword">protected</span> function <a class="code" href="class_code_to_diagram.html#ec172f2211fc097efa89f3546c0bd308">codeInstrumentationClass</a>( $strTextSearch, array &amp;$arrOldClasses , array &amp;$arrNewClasses , array &amp;$arrLines )
<a name="l00694"></a>00694     {
<a name="l00695"></a>00695         <span class="keywordflow">foreach</span>( $arrLines as $intLine =&gt; $strLine )
<a name="l00696"></a>00696         {
<a name="l00697"></a>00697             $arrResult = $this-&gt;<a class="code" href="class_code_to_diagram.html#2d9bbf465fc0ace643bef01690a3336a">codeInstrumentationLine</a>( $strLine , $strTextSearch  );
<a name="l00698"></a>00698 
<a name="l00699"></a>00699             <span class="keywordflow">if</span>( <span class="keyword">sizeof</span>( $arrResult ) !== 0 )
<a name="l00700"></a>00700             {
<a name="l00701"></a>00701                 $arrOldClasses[] = $arrResult[ <span class="stringliteral">"class_old"</span> ];
<a name="l00702"></a>00702                 $arrNewClasses[] = $arrResult[ <span class="stringliteral">"class_new"</span> ];
<a name="l00703"></a>00703                 $arrLines[ $intLine ] = $arrResult[ <span class="stringliteral">"line"</span> ];
<a name="l00704"></a>00704             }
<a name="l00705"></a>00705         }
<a name="l00706"></a>00706     }
<a name="l00707"></a>00707 
<a name="l00715"></a><a class="code" href="class_code_to_diagram.html#5300582d74e4550799d8bc8dffb4af19">00715</a>     <span class="keyword">protected</span> function <a class="code" href="class_code_to_diagram.html#5300582d74e4550799d8bc8dffb4af19">preloadFile</a>( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> , $strContentFile )
<a name="l00716"></a>00716     {
<a name="l00717"></a>00717         <span class="keywordflow">if</span>( self::RUN_IN_FILES )
<a name="l00718"></a>00718         {
<a name="l00719"></a>00719             <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> = <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> . <span class="stringliteral">"(0).phps"</span>;
<a name="l00720"></a>00720             file_put_contents( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> , $strContentFile );
<a name="l00721"></a>00721             require_once( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> );
<a name="l00722"></a>00722             <span class="keywordflow">if</span>( self::REMOVE_FILES )
<a name="l00723"></a>00723             {
<a name="l00724"></a>00724                 unlink( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> );
<a name="l00725"></a>00725             }
<a name="l00726"></a>00726         }
<a name="l00727"></a>00727         <span class="keywordflow">else</span>
<a name="l00728"></a>00728         {
<a name="l00729"></a>00729             eval( <span class="charliteral">'?'</span> . <span class="charliteral">'&gt;'</span> . $strContentFile . <span class="stringliteral">''</span> );
<a name="l00730"></a>00730         }
<a name="l00731"></a>00731         <span class="keywordflow">return</span> $this;
<a name="l00732"></a>00732     }
<a name="l00733"></a>00733     
<a name="l00740"></a><a class="code" href="class_code_to_diagram.html#39823f54aa950aa83d7f0786ae2d2922">00740</a>     <span class="keyword">protected</span> function <a class="code" href="class_code_to_diagram.html#39823f54aa950aa83d7f0786ae2d2922">codeInstrumentationFile</a>( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> , $strContentFile )
<a name="l00741"></a>00741     {
<a name="l00742"></a>00742         $arrLines = explode( <span class="stringliteral">"\n"</span>  , $strContentFile );
<a name="l00743"></a>00743         $arrOldClasses   = array();
<a name="l00744"></a>00744         $arrNewClasses   = array();
<a name="l00745"></a>00745         $arrOldInterface = array();
<a name="l00746"></a>00746         $arrNewInterface = array();
<a name="l00747"></a>00747 
<a name="l00748"></a>00748         $this-&gt;<a class="code" href="class_code_to_diagram.html#ec172f2211fc097efa89f3546c0bd308">codeInstrumentationClass</a>( <span class="stringliteral">"class "</span> , $arrOldClasses , $arrNewClasses, $arrLines );
<a name="l00749"></a>00749         $this-&gt;<a class="code" href="class_code_to_diagram.html#ec172f2211fc097efa89f3546c0bd308">codeInstrumentationClass</a>( <span class="stringliteral">"interface "</span> , $arrOldInterface , $arrNewInterface, $arrLines );
<a name="l00750"></a>00750 
<a name="l00751"></a>00751         $strContentFile = implode( <span class="stringliteral">"\n"</span> , $arrLines );
<a name="l00752"></a>00752 
<a name="l00753"></a>00753         $this-&gt;<a class="code" href="class_code_to_diagram.html#5300582d74e4550799d8bc8dffb4af19">preloadFile</a>( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> , $strContentFile );
<a name="l00754"></a>00754 
<a name="l00755"></a>00755         <span class="keywordflow">foreach</span>( $arrNewClasses as $intKey =&gt; $strNewClassName )
<a name="l00756"></a>00756         {
<a name="l00757"></a>00757             <a class="code" href="code_instrumentation_2example_2test1_8php.html#dff853bfc3335950f89bfb9e1a779c7e">$oReflectionCode</a> = <span class="keyword">new</span> <a class="code" href="class_code_instrumentation_class.html">CodeInstrumentationClass</a>( $strNewClassName , $strContentFile );
<a name="l00758"></a>00758             <a class="code" href="code_instrumentation_2example_2test1_8php.html#dff853bfc3335950f89bfb9e1a779c7e">$oReflectionCode</a>-&gt;setClassName( $arrOldClasses[ $intKey ] );
<a name="l00759"></a>00759             <a class="code" href="code_instrumentation_2example_2test1_8php.html#882f0b62de6f379d0e0cf88ef6658601">$strNewCode</a> = <a class="code" href="code_instrumentation_2example_2test1_8php.html#dff853bfc3335950f89bfb9e1a779c7e">$oReflectionCode</a>-&gt;getCode();
<a name="l00760"></a>00760             <span class="keywordflow">if</span>( self::RUN_IN_FILES )
<a name="l00761"></a>00761             {
<a name="l00762"></a>00762                 <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> = trim( $strNewClassName ) . <span class="stringliteral">"(1).phps"</span>;
<a name="l00763"></a>00763                 file_put_contents( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> , <span class="stringliteral">'&lt;?'</span> . <span class="stringliteral">'php '</span> .  <a class="code" href="code_instrumentation_2example_2test1_8php.html#882f0b62de6f379d0e0cf88ef6658601">$strNewCode</a> );
<a name="l00764"></a>00764                 require_once( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> );
<a name="l00765"></a>00765                 <span class="keywordflow">if</span>( self::REMOVE_FILES )
<a name="l00766"></a>00766                 {
<a name="l00767"></a>00767                     unlink( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> );
<a name="l00768"></a>00768                 }
<a name="l00769"></a>00769             }
<a name="l00770"></a>00770             <span class="keywordflow">else</span>
<a name="l00771"></a>00771             {
<a name="l00772"></a>00772                 eval( <a class="code" href="code_instrumentation_2example_2test1_8php.html#882f0b62de6f379d0e0cf88ef6658601">$strNewCode</a> );
<a name="l00773"></a>00773             }
<a name="l00774"></a>00774         }
<a name="l00775"></a>00775         <span class="keywordflow">foreach</span>( $arrNewInterface as $intKey =&gt; $strNewInterfaceName )
<a name="l00776"></a>00776         {
<a name="l00777"></a>00777             $strOldInterface = $arrOldInterface[ $intKey ];
<a name="l00779"></a>00779             <a class="code" href="code_instrumentation_2example_2test1_8php.html#882f0b62de6f379d0e0cf88ef6658601">$strNewCode</a> = <span class="stringliteral">"interface $strOldInterface {} "</span>;
<a name="l00780"></a>00780             <span class="keywordflow">if</span>( self::RUN_IN_FILES )
<a name="l00781"></a>00781             {
<a name="l00782"></a>00782                 <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> = trim( $strNewInterfaceName ) . <span class="stringliteral">"(1).phps"</span>;
<a name="l00783"></a>00783                 file_put_contents( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> , <span class="stringliteral">'&lt;?'</span> . <span class="stringliteral">'php '</span> .  <a class="code" href="code_instrumentation_2example_2test1_8php.html#882f0b62de6f379d0e0cf88ef6658601">$strNewCode</a> );
<a name="l00784"></a>00784                 require_once( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> );
<a name="l00785"></a>00785                 <span class="keywordflow">if</span>( self::REMOVE_FILES )
<a name="l00786"></a>00786                 {
<a name="l00787"></a>00787                     unlink( <a class="code" href="class_code_to_diagram.html#f2f34642a0d84201c7dc5604c26a5f87">$strFileName</a> );
<a name="l00788"></a>00788                 }
<a name="l00789"></a>00789             }
<a name="l00790"></a>00790             <span class="keywordflow">else</span>
<a name="l00791"></a>00791             {
<a name="l00792"></a>00792                 eval( <a class="code" href="code_instrumentation_2example_2test1_8php.html#882f0b62de6f379d0e0cf88ef6658601">$strNewCode</a> );
<a name="l00793"></a>00793             }
<a name="l00794"></a>00794         }
<a name="l00795"></a>00795     }
<a name="l00796"></a>00796 
<a name="l00804"></a><a class="code" href="class_code_to_diagram.html#46cc51b5da83819fed739bd1d8b1d2ca">00804</a>     <span class="keyword">protected</span> function <a class="code" href="class_code_to_diagram.html#46cc51b5da83819fed739bd1d8b1d2ca">loadFile</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strFile )
<a name="l00805"></a>00805     {
<a name="l00806"></a>00806         <span class="keywordflow">if</span>( basename( $strFile ) == <span class="stringliteral">'CodeToDiagram.class.php'</span> )
<a name="l00807"></a>00807         {
<a name="l00808"></a>00808             <span class="keywordflow">return</span> $this;
<a name="l00809"></a>00809         }
<a name="l00810"></a>00810         $this-&gt;<a class="code" href="class_code_to_diagram.html#5ddaedacfee2008cacee41a47363e7fa">addFile</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strFile );
<a name="l00811"></a>00811 
<a name="l00812"></a>00812         <span class="keywordflow">if</span>( <a class="code" href="class_coruja_file_manipulation.html#56545f86fdff2e9b63465549644a1d75">CorujaFileManipulation::isRelativePath</a>( $strFile ) )
<a name="l00813"></a>00813         {
<a name="l00814"></a>00814             $strFullFile = $this-&gt;<a class="code" href="class_code_to_diagram.html#ba72ffc8b4aeabbd33a7206c395ede18">fixFileName</a>( <a class="code" href="class_code_to_diagram.html#b21d5fc633f2f024c72f18e4ce63555f">$strFileFrom</a>, $strFile );
<a name="l00815"></a>00815         }
<a name="l00816"></a>00816         <span class="keywordflow">else</span>
<a name="l00817"></a>00817         {
<a name="l00818"></a>00818             $strFullFile = $strFile;
<a name="l00819"></a>00819         }
<a name="l00820"></a>00820 
<a name="l00821"></a>00821         <span class="keywordflow">if</span>( ! file_exists( $strFullFile ) )
<a name="l00822"></a>00822         {
<a name="l00823"></a>00823             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_code_to_diagram_exception.html">CodeToDiagramException</a>( <span class="stringliteral">"Unable to find file: "</span> . $strFullFile );
<a name="l00824"></a>00824         }
<a name="l00825"></a>00825 
<a name="l00826"></a>00826         $strContentFile = file_get_contents( $strFullFile );
<a name="l00827"></a>00827         $strContentFile = $this-&gt;<a class="code" href="class_code_to_diagram.html#4ae436da9e8fe29b6ce2aa543212fa72">convertFileContent</a>( $strContentFile , $strFile , $strFullFile );
<a name="l00828"></a>00828         $this-&gt;<a class="code" href="class_code_to_diagram.html#39823f54aa950aa83d7f0786ae2d2922">codeInstrumentationFile</a>( $strFile, $strContentFile );
<a name="l00829"></a>00829         
<a name="l00830"></a>00830         <span class="keywordflow">return</span> $this;
<a name="l00831"></a>00831     }
<a name="l00832"></a>00832 
<a name="l00838"></a><a class="code" href="class_code_to_diagram.html#4f3c0ec90b4f1c97f6795b6b113ff2c2">00838</a>     <span class="keyword">public</span> function <a class="code" href="class_code_to_diagram.html#4f3c0ec90b4f1c97f6795b6b113ff2c2">setCallerPathByFile</a>( $strCallerFile )
<a name="l00839"></a>00839     {
<a name="l00840"></a>00840         $this-&gt;<a class="code" href="class_code_to_diagram.html#bdded6991e674ce82f04f701972ebf9f">setCallerPath</a>( <a class="code" href="class_coruja_file_manipulation.html#3ddb4823b9d4ae3268062f9fed585331">CorujaFileManipulation::getPathOfFile</a>( $strCallerFile ) );
<a name="l00841"></a>00841     }
<a name="l00842"></a>00842 }
<a name="l00843"></a>00843 
<a name="l00844"></a>00844 ?&gt;
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat May 2 20:59:08 2009 for CodeToDiagram by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
