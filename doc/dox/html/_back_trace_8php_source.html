<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>CodeToDiagram: components/backtrace/BackTrace.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_5952676466667a7dac4d2b5465cc4c58.html">components</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_455805a847cb0f261fd1c1f664f093b8.html">backtrace</a>
  </div>
</div>
<div class="contents">
<h1>BackTrace.php</h1><a href="_back_trace_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00018"></a><a class="code" href="class_back_trace.html">00018</a> <span class="keyword">class </span><a class="code" href="class_back_trace.html">BackTrace</a>
<a name="l00019"></a>00019 {
<a name="l00031"></a><a class="code" href="class_back_trace.html#41001bb7178dc4a269ad6bebebc88da1">00031</a>     <span class="keyword">const</span> <a class="code" href="class_back_trace.html#41001bb7178dc4a269ad6bebebc88da1">SCOPE_FILE</a> = <span class="stringliteral">"file"</span>;
<a name="l00032"></a>00032 
<a name="l00046"></a><a class="code" href="class_back_trace.html#eea61035bd38b8bdc6b3abc4e387d98f">00046</a>     <span class="keyword">const</span> <a class="code" href="class_back_trace.html#eea61035bd38b8bdc6b3abc4e387d98f">SCOPE_FUNCTION</a> = <span class="stringliteral">"function"</span>;
<a name="l00047"></a>00047 
<a name="l00061"></a><a class="code" href="class_back_trace.html#32fd91e8f98ebf2cd2370c1919be0b0d">00061</a>     <span class="keyword">const</span> <a class="code" href="class_back_trace.html#32fd91e8f98ebf2cd2370c1919be0b0d">SCOPE_METHOD</a> = <span class="stringliteral">"-&gt;"</span>;
<a name="l00062"></a>00062 
<a name="l00076"></a><a class="code" href="class_back_trace.html#096359905e9cd5f803f8414eea1a713b">00076</a>     <span class="keyword">const</span> <a class="code" href="class_back_trace.html#096359905e9cd5f803f8414eea1a713b">SCOPE_STATIC</a> = <span class="stringliteral">"::"</span>;
<a name="l00077"></a>00077 
<a name="l00089"></a><a class="code" href="class_back_trace.html#92d25322fa24d1675b6331dad400ee1f">00089</a>     <span class="keyword">private</span> <a class="code" href="class_back_trace.html#92d25322fa24d1675b6331dad400ee1f">$aCurrent</a> = array();
<a name="l00090"></a>00090 
<a name="l00102"></a><a class="code" href="class_back_trace.html#5cb2fde204eda0effb2a17536b7cf962">00102</a>     <span class="keyword">private</span> <a class="code" href="class_back_trace.html#5cb2fde204eda0effb2a17536b7cf962">$aStack</a> = array();
<a name="l00103"></a>00103 
<a name="l00114"></a><a class="code" href="class_back_trace.html#128f1dc665616c26696bdedbea55f312">00114</a>     <span class="keyword">private</span> <a class="code" href="class_back_trace.html#128f1dc665616c26696bdedbea55f312">$iLevel</a> = 0;
<a name="l00115"></a>00115 
<a name="l00129"></a><a class="code" href="class_back_trace.html#e81810ff23f1543976f5d3eacbfeeb29">00129</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#e81810ff23f1543976f5d3eacbfeeb29">__construct</a>( array <a class="code" href="class_back_trace.html#5cb2fde204eda0effb2a17536b7cf962">$aStack</a> = array() )
<a name="l00130"></a>00130     {
<a name="l00131"></a>00131         $this-&gt;aStack = count( <a class="code" href="class_back_trace.html#5cb2fde204eda0effb2a17536b7cf962">$aStack</a> ) === 0 ? debug_backtrace() : <a class="code" href="class_back_trace.html#5cb2fde204eda0effb2a17536b7cf962">$aStack</a>;
<a name="l00132"></a>00132         $this-&gt;<a class="code" href="class_back_trace.html#6991034797ac2852fc2f487f12d0993c">levelTop</a>();
<a name="l00133"></a>00133     }
<a name="l00134"></a>00134 
<a name="l00146"></a><a class="code" href="class_back_trace.html#d5d0eb4a7673238105f5ed4734523428">00146</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#d5d0eb4a7673238105f5ed4734523428">explain</a>()
<a name="l00147"></a>00147     {
<a name="l00148"></a>00148         <span class="keywordflow">return</span> <a class="code" href="class_back_trace_explain.html#4e3e5944ef133f107e9ebc98f1abde0a">BackTraceExplain::perform</a>( $this );
<a name="l00149"></a>00149     }
<a name="l00150"></a>00150 
<a name="l00162"></a><a class="code" href="class_back_trace.html#ba0d5b303383fb5b1fabb5fd01cd3800">00162</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#ba0d5b303383fb5b1fabb5fd01cd3800">getAll</a>()
<a name="l00163"></a>00163     {
<a name="l00164"></a>00164         <span class="keywordflow">return</span> $this-&gt;aStack;
<a name="l00165"></a>00165     }
<a name="l00166"></a>00166 
<a name="l00177"></a><a class="code" href="class_back_trace.html#1d4c324c5a088be98d99d3efbf3502e1">00177</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#1d4c324c5a088be98d99d3efbf3502e1">getArguments</a>()
<a name="l00178"></a>00178     {
<a name="l00179"></a>00179         <span class="keywordflow">if</span> ( array_key_exists( <span class="stringliteral">"args"</span>, $this-&gt;aCurrent ) === <span class="keyword">false</span> )
<a name="l00180"></a>00180         {
<a name="l00181"></a>00181             <span class="keywordflow">return</span> array();
<a name="l00182"></a>00182         }
<a name="l00183"></a>00183         <span class="keywordflow">return</span> (array) $this-&gt;aCurrent[<span class="stringliteral">"args"</span>];
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185 
<a name="l00198"></a><a class="code" href="class_back_trace.html#23ecbde357f7f6bde5a50f876334a74d">00198</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#23ecbde357f7f6bde5a50f876334a74d">getClass</a>()
<a name="l00199"></a>00199     {
<a name="l00200"></a>00200         <span class="keywordflow">if</span> ( array_key_exists( <span class="stringliteral">"class"</span>, $this-&gt;aCurrent ) === <span class="keyword">false</span> )
<a name="l00201"></a>00201         {
<a name="l00202"></a>00202             <span class="keywordflow">return</span> <span class="stringliteral">""</span>;
<a name="l00203"></a>00203         }
<a name="l00204"></a>00204         <span class="keywordflow">return</span> (<span class="keywordtype">string</span>) $this-&gt;aCurrent[<span class="stringliteral">"class"</span>];
<a name="l00205"></a>00205     }
<a name="l00206"></a>00206 
<a name="l00217"></a><a class="code" href="class_back_trace.html#d926899d7cac34a3f1a90e552d8eb27d">00217</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#d926899d7cac34a3f1a90e552d8eb27d">getCurrent</a>()
<a name="l00218"></a>00218     {
<a name="l00219"></a>00219         <span class="keywordflow">return</span> $this-&gt;aCurrent;
<a name="l00220"></a>00220     }
<a name="l00221"></a>00221 
<a name="l00232"></a><a class="code" href="class_back_trace.html#932d18f80cc26b50d2855ce5925a385a">00232</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#932d18f80cc26b50d2855ce5925a385a">getFile</a>( $bOnlyName = <span class="keyword">false</span> )
<a name="l00233"></a>00233     {
<a name="l00234"></a>00234         <span class="keywordflow">if</span> ( array_key_exists( <span class="stringliteral">"file"</span>, $this-&gt;aCurrent ) === <span class="keyword">false</span> )
<a name="l00235"></a>00235         {
<a name="l00236"></a>00236             <span class="keywordflow">return</span> <span class="stringliteral">""</span>;
<a name="l00237"></a>00237         }
<a name="l00238"></a>00238         <span class="keywordflow">if</span> ( $bOnlyName === <span class="keyword">true</span> )
<a name="l00239"></a>00239         {
<a name="l00240"></a>00240             <span class="keywordflow">return</span> basename( (<span class="keywordtype">string</span>) $this-&gt;aCurrent[<span class="stringliteral">"file"</span>] );
<a name="l00241"></a>00241         }
<a name="l00242"></a>00242         <span class="keywordflow">return</span> (<span class="keywordtype">string</span>) $this-&gt;aCurrent[<span class="stringliteral">"file"</span>];
<a name="l00243"></a>00243     }
<a name="l00244"></a>00244 
<a name="l00257"></a><a class="code" href="class_back_trace.html#3cb728ca27acfebd282caecdb8a1f5fc">00257</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#3cb728ca27acfebd282caecdb8a1f5fc">getFunction</a>()
<a name="l00258"></a>00258     {
<a name="l00259"></a>00259         <span class="keywordflow">if</span> ( array_key_exists( <span class="stringliteral">"function"</span>, $this-&gt;aCurrent ) === <span class="keyword">false</span> )
<a name="l00260"></a>00260         {
<a name="l00261"></a>00261             <span class="keywordflow">return</span> <span class="stringliteral">""</span>;
<a name="l00262"></a>00262         }
<a name="l00263"></a>00263         <span class="keywordflow">return</span> (<span class="keywordtype">string</span>) $this-&gt;aCurrent[<span class="stringliteral">"function"</span>];
<a name="l00264"></a>00264     }
<a name="l00265"></a>00265 
<a name="l00273"></a><a class="code" href="class_back_trace.html#23fac327059bf3fd0fe57555252d8cf2">00273</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#23fac327059bf3fd0fe57555252d8cf2">getLevel</a>()
<a name="l00274"></a>00274     {
<a name="l00275"></a>00275         <span class="keywordflow">return</span> $this-&gt;iLevel;
<a name="l00276"></a>00276     }
<a name="l00277"></a>00277 
<a name="l00287"></a><a class="code" href="class_back_trace.html#ef9c32f6066788a101028a1d4150f8cb">00287</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#ef9c32f6066788a101028a1d4150f8cb">getLine</a>()
<a name="l00288"></a>00288     {
<a name="l00289"></a>00289         <span class="keywordflow">if</span> ( array_key_exists( <span class="stringliteral">"line"</span>, $this-&gt;aCurrent ) === <span class="keyword">false</span> )
<a name="l00290"></a>00290         {
<a name="l00291"></a>00291             <span class="keywordflow">return</span> 0;
<a name="l00292"></a>00292         }
<a name="l00293"></a>00293         <span class="keywordflow">return</span> (integer) $this-&gt;aCurrent[<span class="stringliteral">"line"</span>];
<a name="l00294"></a>00294     }
<a name="l00295"></a>00295 
<a name="l00314"></a><a class="code" href="class_back_trace.html#0dce4e854dda57ffc316fd755df9b309">00314</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#0dce4e854dda57ffc316fd755df9b309">getScope</a>()
<a name="l00315"></a>00315     {
<a name="l00316"></a>00316         $sType = $this-&gt;<a class="code" href="class_back_trace.html#830b5c75df72b32396701bc563fbe3c7">getType</a>();
<a name="l00317"></a>00317         <span class="keywordflow">if</span> ( $sType === <span class="stringliteral">""</span> )
<a name="l00318"></a>00318         {
<a name="l00319"></a>00319             $sType = $this-&gt;<a class="code" href="class_back_trace.html#3cb728ca27acfebd282caecdb8a1f5fc">getFunction</a>() === <span class="stringliteral">""</span> ? self::SCOPE_FILE : self::SCOPE_FUNCTION;
<a name="l00320"></a>00320         }
<a name="l00321"></a>00321         <span class="keywordflow">return</span> $sType;
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323 
<a name="l00335"></a><a class="code" href="class_back_trace.html#830b5c75df72b32396701bc563fbe3c7">00335</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#830b5c75df72b32396701bc563fbe3c7">getType</a>()
<a name="l00336"></a>00336     {
<a name="l00337"></a>00337         <span class="keywordflow">if</span> ( array_key_exists( <span class="stringliteral">"type"</span>, $this-&gt;aCurrent ) === <span class="keyword">false</span> )
<a name="l00338"></a>00338         {
<a name="l00339"></a>00339             <span class="keywordflow">return</span> <span class="stringliteral">""</span>;
<a name="l00340"></a>00340         }
<a name="l00341"></a>00341         <span class="keywordflow">return</span> (<span class="keywordtype">string</span>) $this-&gt;aCurrent[<span class="stringliteral">"type"</span>];
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343 
<a name="l00351"></a><a class="code" href="class_back_trace.html#947fed0ee4bf21433d5bc900cc2f7547">00351</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#947fed0ee4bf21433d5bc900cc2f7547">levelBottom</a>()
<a name="l00352"></a>00352     {
<a name="l00353"></a>00353         $this-&gt;<a class="code" href="class_back_trace.html#ecef87c7823ef2809065c1544f7a57e9">setLevel</a>( count( $this-&gt;aStack ) - 1 );
<a name="l00354"></a>00354     }
<a name="l00355"></a>00355 
<a name="l00373"></a><a class="code" href="class_back_trace.html#abf1c1a9c1222e9ff2abb2dc29e7b610">00373</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#abf1c1a9c1222e9ff2abb2dc29e7b610">levelDown</a>( $iDepth = 1, $bTry = <span class="keyword">false</span> )
<a name="l00374"></a>00374     {
<a name="l00375"></a>00375         $iDepth = (integer) $iDepth;
<a name="l00376"></a>00376         $bReturn = $this-&gt;<a class="code" href="class_back_trace.html#ecef87c7823ef2809065c1544f7a57e9">setLevel</a>( $this-&gt;iLevel + $iDepth );
<a name="l00377"></a>00377         <span class="keywordflow">if</span> ( $bReturn === <span class="keyword">false</span> &amp;&amp; $bTry === <span class="keyword">true</span> )
<a name="l00378"></a>00378         {
<a name="l00379"></a>00379             $iDepth &gt; 0 ? $this-&gt;<a class="code" href="class_back_trace.html#6991034797ac2852fc2f487f12d0993c">levelTop</a>() : $this-&gt;<a class="code" href="class_back_trace.html#947fed0ee4bf21433d5bc900cc2f7547">levelBottom</a>();
<a name="l00380"></a>00380         }
<a name="l00381"></a>00381         <span class="keywordflow">return</span> $bReturn;
<a name="l00382"></a>00382     }
<a name="l00383"></a>00383 
<a name="l00391"></a><a class="code" href="class_back_trace.html#6991034797ac2852fc2f487f12d0993c">00391</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#6991034797ac2852fc2f487f12d0993c">levelTop</a>()
<a name="l00392"></a>00392     {
<a name="l00393"></a>00393         $this-&gt;<a class="code" href="class_back_trace.html#ecef87c7823ef2809065c1544f7a57e9">setLevel</a>( 0 );
<a name="l00394"></a>00394     }
<a name="l00395"></a>00395 
<a name="l00413"></a><a class="code" href="class_back_trace.html#89e47a095ea0bb56352b6fdf68740eb0">00413</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#89e47a095ea0bb56352b6fdf68740eb0">levelUp</a>( $iDepth = 1, $bTry = <span class="keyword">false</span> )
<a name="l00414"></a>00414     {
<a name="l00415"></a>00415         $iDepth = (integer) $iDepth;
<a name="l00416"></a>00416         $bReturn = $this-&gt;<a class="code" href="class_back_trace.html#ecef87c7823ef2809065c1544f7a57e9">setLevel</a>( $this-&gt;iLevel - $iDepth );
<a name="l00417"></a>00417         <span class="keywordflow">if</span> ( $bReturn === <span class="keyword">false</span> &amp;&amp; $bTry === <span class="keyword">true</span> )
<a name="l00418"></a>00418         {
<a name="l00419"></a>00419             $iDepth &gt; 0 ? $this-&gt;<a class="code" href="class_back_trace.html#947fed0ee4bf21433d5bc900cc2f7547">levelBottom</a>() : $this-&gt;<a class="code" href="class_back_trace.html#6991034797ac2852fc2f487f12d0993c">levelTop</a>();
<a name="l00420"></a>00420         }
<a name="l00421"></a>00421         <span class="keywordflow">return</span> $bReturn;
<a name="l00422"></a>00422     }
<a name="l00423"></a>00423 
<a name="l00436"></a><a class="code" href="class_back_trace.html#ecef87c7823ef2809065c1544f7a57e9">00436</a>     <span class="keyword">public</span> function <a class="code" href="class_back_trace.html#ecef87c7823ef2809065c1544f7a57e9">setLevel</a>( <a class="code" href="class_back_trace.html#128f1dc665616c26696bdedbea55f312">$iLevel</a> )
<a name="l00437"></a>00437     {
<a name="l00438"></a>00438         <a class="code" href="class_back_trace.html#128f1dc665616c26696bdedbea55f312">$iLevel</a> = (integer) <a class="code" href="class_back_trace.html#128f1dc665616c26696bdedbea55f312">$iLevel</a>;
<a name="l00439"></a>00439         <span class="keywordflow">if</span> ( array_key_exists( <a class="code" href="class_back_trace.html#128f1dc665616c26696bdedbea55f312">$iLevel</a>, $this-&gt;aStack ) === true )
<a name="l00440"></a>00440         {
<a name="l00441"></a>00441             $this-&gt;iLevel = <a class="code" href="class_back_trace.html#128f1dc665616c26696bdedbea55f312">$iLevel</a>;
<a name="l00442"></a>00442         }
<a name="l00443"></a>00443         $this-&gt;aCurrent = &amp;$this-&gt;aStack[$this-&gt;iLevel];
<a name="l00444"></a>00444         <span class="keywordflow">return</span> $this-&gt;iLevel === <a class="code" href="class_back_trace.html#128f1dc665616c26696bdedbea55f312">$iLevel</a>;
<a name="l00445"></a>00445     }
<a name="l00446"></a>00446 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat May 2 20:59:07 2009 for CodeToDiagram by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
