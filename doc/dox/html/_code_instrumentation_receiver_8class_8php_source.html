<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>CodeToDiagram: components/codeInstrumentation/CodeInstrumentationReceiver.class.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_5952676466667a7dac4d2b5465cc4c58.html">components</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_9c182f2b4e0e1d36f6e1886f5794411c.html">codeInstrumentation</a>
  </div>
</div>
<div class="contents">
<h1>CodeInstrumentationReceiver.class.php</h1><a href="_code_instrumentation_receiver_8class_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00022"></a><a class="code" href="class_code_instrumentation_receiver.html">00022</a> <span class="keyword">class </span><a class="code" href="class_code_instrumentation_receiver.html">CodeInstrumentationReceiver</a>
<a name="l00023"></a>00023 {
<a name="l00029"></a><a class="code" href="class_code_instrumentation_receiver.html#aab882095da061a56ed923f40497d878">00029</a>     <span class="keyword">static</span> <a class="code" href="class_code_instrumentation_receiver.html#aab882095da061a56ed923f40497d878">$objCodeInstrumentationReceiver</a>;
<a name="l00030"></a>00030 
<a name="l00037"></a><a class="code" href="class_code_instrumentation_receiver.html#c7f35371cd40ca055dee475b121a99c5">00037</a>     <span class="keyword">protected</span> <a class="code" href="class_code_instrumentation_receiver.html#c7f35371cd40ca055dee475b121a99c5">$booIgnoreNullReturns</a> = <span class="keyword">true</span>;
<a name="l00038"></a>00038     
<a name="l00045"></a><a class="code" href="class_code_instrumentation_receiver.html#c97438486aabbfa4ee0880dfa95da884">00045</a>     <span class="keyword">protected</span> <a class="code" href="class_code_instrumentation_receiver.html#c97438486aabbfa4ee0880dfa95da884">$booIgnoreRecursiveCalls</a> = <span class="keyword">false</span>;
<a name="l00046"></a>00046     
<a name="l00055"></a><a class="code" href="class_code_instrumentation_receiver.html#d18203b561cb77792a5496f02e024874">00055</a>     <span class="keyword">protected</span> <a class="code" href="class_code_instrumentation_receiver.html#d18203b561cb77792a5496f02e024874">$booMergeSameClassObjects</a> = <span class="keyword">false</span>;
<a name="l00056"></a>00056     
<a name="l00062"></a><a class="code" href="class_code_instrumentation_receiver.html#6fe1a7ba669f936d4df438591f632963">00062</a>     <span class="keyword">protected</span> <a class="code" href="class_code_instrumentation_receiver.html#6fe1a7ba669f936d4df438591f632963">$arrStack</a> = array();
<a name="l00063"></a>00063 
<a name="l00069"></a><a class="code" href="class_code_instrumentation_receiver.html#51bd2c8dc9510ff43aaf11f3129bea0f">00069</a>     <span class="keyword">protected</span> <a class="code" href="class_code_instrumentation_receiver.html#51bd2c8dc9510ff43aaf11f3129bea0f">$arrActors</a> = array();
<a name="l00070"></a>00070 
<a name="l00076"></a><a class="code" href="class_code_instrumentation_receiver.html#d0ae260f94228a6360e0a72c8245bb60">00076</a>     <span class="keyword">protected</span> <a class="code" href="class_code_instrumentation_receiver.html#d0ae260f94228a6360e0a72c8245bb60">$arrClasses</a> = array();
<a name="l00077"></a>00077 
<a name="l00083"></a><a class="code" href="class_code_instrumentation_receiver.html#bc2745674d501af3a6d23b496ad9fd05">00083</a>     <span class="keyword">protected</span> <a class="code" href="class_code_instrumentation_receiver.html#bc2745674d501af3a6d23b496ad9fd05">$arrMessages</a> = array();
<a name="l00084"></a>00084 
<a name="l00090"></a><a class="code" href="class_code_instrumentation_receiver.html#eefa469c1b13fe1fec040c910b720034">00090</a>     <span class="keyword">protected</span> <a class="code" href="class_code_instrumentation_receiver.html#eefa469c1b13fe1fec040c910b720034">$objXmlSequence</a> = null;
<a name="l00091"></a>00091 
<a name="l00101"></a><a class="code" href="class_code_instrumentation_receiver.html#57b10b692e4fa48f22b1586376108f1b">00101</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#57b10b692e4fa48f22b1586376108f1b">setIgnoreNullReturns</a>( <a class="code" href="class_code_instrumentation_receiver.html#c7f35371cd40ca055dee475b121a99c5">$booIgnoreNullReturns</a> )
<a name="l00102"></a>00102     {
<a name="l00103"></a>00103         $this-&gt;booIgnoreNullReturns = <a class="code" href="class_code_instrumentation_receiver.html#c7f35371cd40ca055dee475b121a99c5">$booIgnoreNullReturns</a>;
<a name="l00104"></a>00104         <span class="keywordflow">return</span> $this;
<a name="l00105"></a>00105     }
<a name="l00106"></a>00106     
<a name="l00115"></a><a class="code" href="class_code_instrumentation_receiver.html#c9ab1942c4647d400e7af7145f29faf7">00115</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#c9ab1942c4647d400e7af7145f29faf7">getIgnoreNullReturns</a>()
<a name="l00116"></a>00116     {
<a name="l00117"></a>00117         <span class="keywordflow">return</span> $this-&gt;booIgnoreNullReturns;
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119     
<a name="l00129"></a><a class="code" href="class_code_instrumentation_receiver.html#9d58160ec1e8b7bb322fb4ee60f47998">00129</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#9d58160ec1e8b7bb322fb4ee60f47998">setIgnoreRecursiveCalls</a>( <a class="code" href="class_code_instrumentation_receiver.html#c97438486aabbfa4ee0880dfa95da884">$booIgnoreRecursiveCalls</a> )
<a name="l00130"></a>00130     {
<a name="l00131"></a>00131         $this-&gt;booIgnoreRecursiveCalls = <a class="code" href="class_code_instrumentation_receiver.html#c97438486aabbfa4ee0880dfa95da884">$booIgnoreRecursiveCalls</a>;
<a name="l00132"></a>00132         <span class="keywordflow">return</span> $this;
<a name="l00133"></a>00133     }
<a name="l00134"></a>00134     
<a name="l00144"></a><a class="code" href="class_code_instrumentation_receiver.html#9827f39df527b013a3d967215cac31d1">00144</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#9827f39df527b013a3d967215cac31d1">getIgnoreRecursiveCalls</a>()
<a name="l00145"></a>00145     {
<a name="l00146"></a>00146         <span class="keywordflow">return</span> $this-&gt;booIgnoreRecursiveCalls;
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148    
<a name="l00156"></a><a class="code" href="class_code_instrumentation_receiver.html#bdded6991e674ce82f04f701972ebf9f">00156</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#bdded6991e674ce82f04f701972ebf9f">setCallerPath</a>( $strCallerPath )
<a name="l00157"></a>00157     {
<a name="l00158"></a>00158         $this-&gt;objXmlSequence-&gt;setCallerPath( $strCallerPath );
<a name="l00159"></a>00159         <span class="keywordflow">return</span> $this;
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161     
<a name="l00168"></a><a class="code" href="class_code_instrumentation_receiver.html#a8c839c9d33ebad153541a31ffc7ef3e">00168</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#a8c839c9d33ebad153541a31ffc7ef3e">getCallerPath</a>()
<a name="l00169"></a>00169     {
<a name="l00170"></a>00170         <span class="keywordflow">return</span> $this-&gt;objXmlSequence-&gt;getCallerPath();  
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172     
<a name="l00180"></a><a class="code" href="class_code_instrumentation_receiver.html#261f2bb173e655f2ead64eda4c29e76a">00180</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#261f2bb173e655f2ead64eda4c29e76a">setPublicPath</a>( $strPublicPath )
<a name="l00181"></a>00181     {
<a name="l00182"></a>00182         $this-&gt;objXmlSequence-&gt;setPublicPath( $strPublicPath );
<a name="l00183"></a>00183         <span class="keywordflow">return</span> $this;
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185     
<a name="l00192"></a><a class="code" href="class_code_instrumentation_receiver.html#74df99a19bc54d630a15e1778144eb31">00192</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#74df99a19bc54d630a15e1778144eb31">getPublicPath</a>()
<a name="l00193"></a>00193     {
<a name="l00194"></a>00194         <span class="keywordflow">return</span> $this-&gt;objXmlSequence-&gt;getPublicPath();  
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196     
<a name="l00206"></a><a class="code" href="class_code_instrumentation_receiver.html#095c5d389db211932136b53f25f39685">00206</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#095c5d389db211932136b53f25f39685">__construct</a>()
<a name="l00207"></a>00207     {
<a name="l00208"></a>00208         <span class="comment">// 1. create the xml sequence object //</span>
<a name="l00209"></a>00209         $this-&gt;objXmlSequence = <span class="keyword">new</span> <a class="code" href="class_xml_sequence.html">XmlSequence</a>();
<a name="l00210"></a>00210 
<a name="l00211"></a>00211         <span class="comment">// 2. create the user actor //  </span>
<a name="l00212"></a>00212         $objActorFrom = <span class="keyword">new</span> <a class="code" href="class_xml_sequence_actor.html">XmlSequenceActor</a>();
<a name="l00213"></a>00213         $objActorFrom-&gt;setType( <span class="stringliteral">'user'</span> );
<a name="l00214"></a>00214         $objActorFrom-&gt;setName( <span class="stringliteral">"user"</span> );
<a name="l00215"></a>00215         $objActorFrom-&gt;setId( <span class="keyword">sizeof</span>( $this-&gt;arrActors ) + 1 );
<a name="l00216"></a>00216         $this-&gt;arrActors[] = $objActorFrom;
<a name="l00217"></a>00217         $this-&gt;arrStack[] = $objActorFrom;
<a name="l00218"></a>00218         $this-&gt;objXmlSequence-&gt;addActor($objActorFrom);
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220 
<a name="l00227"></a><a class="code" href="class_code_instrumentation_receiver.html#c93fbec81f07e5d15f80db907e63dc10">00227</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_code_instrumentation_receiver.html#c93fbec81f07e5d15f80db907e63dc10">getInstance</a>()
<a name="l00228"></a>00228     {
<a name="l00229"></a>00229         <span class="keywordflow">if</span>( self::$objCodeInstrumentationReceiver ==  null )
<a name="l00230"></a>00230         {
<a name="l00231"></a>00231             self::$objCodeInstrumentationReceiver = <span class="keyword">new</span> <a class="code" href="class_code_instrumentation_receiver.html">CodeInstrumentationReceiver</a>();
<a name="l00232"></a>00232         }
<a name="l00233"></a>00233         <span class="keywordflow">return</span> self::$objCodeInstrumentationReceiver;
<a name="l00234"></a>00234     }
<a name="l00235"></a>00235 
<a name="l00247"></a><a class="code" href="class_code_instrumentation_receiver.html#20bedeec5c454d58b3b5a3b579225323">00247</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#20bedeec5c454d58b3b5a3b579225323">renameMethod</a>( $strMethod )
<a name="l00248"></a>00248     {
<a name="l00249"></a>00249         <span class="keywordflow">switch</span>( $strMethod )
<a name="l00250"></a>00250         {
<a name="l00251"></a>00251                 <span class="comment">// 1. if __construct replace by &lt;&lt;create&gt;&gt; //</span>
<a name="l00252"></a>00252             <span class="keywordflow">case</span> <span class="stringliteral">"__construct"</span>:
<a name="l00253"></a>00253             {
<a name="l00254"></a>00254                 $strMethod = htmlentities( <span class="stringliteral">"&lt;&lt;create&gt;&gt;"</span> );
<a name="l00255"></a>00255                 <span class="keywordflow">break</span>;
<a name="l00256"></a>00256             }
<a name="l00257"></a>00257             <span class="comment">// 2. if __destruct replace by &lt;&lt;destroy&gt;&gt; //</span>
<a name="l00258"></a>00258             <span class="keywordflow">case</span> <span class="stringliteral">"__destruct"</span>:
<a name="l00259"></a>00259             {
<a name="l00260"></a>00260                 $strMethod = htmlentities( <span class="stringliteral">"&lt;&lt;destroy&gt;&gt;"</span> );
<a name="l00261"></a>00261                 <span class="keywordflow">break</span>;
<a name="l00262"></a>00262             }
<a name="l00263"></a>00263             <span class="comment">// 3. other cases should append the "()" //</span>
<a name="l00264"></a>00264             <span class="keywordflow">default</span>:
<a name="l00265"></a>00265             {
<a name="l00266"></a>00266                 $strMethod .= <span class="stringliteral">"()"</span>;
<a name="l00267"></a>00267                 <span class="keywordflow">break</span>;
<a name="l00268"></a>00268             }
<a name="l00269"></a>00269         }
<a name="l00270"></a>00270         <span class="keywordflow">return</span> $strMethod;
<a name="l00271"></a>00271     }
<a name="l00272"></a>00272 
<a name="l00293"></a><a class="code" href="class_code_instrumentation_receiver.html#9e9c5a8aaabb5839bd53f2a4bf8738e1">00293</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#9e9c5a8aaabb5839bd53f2a4bf8738e1">onEnterMethod</a>( $uid , $strClassDefinition , $strMethod, $arrArguments )
<a name="l00294"></a>00294     {
<a name="l00295"></a>00295         <span class="comment">// 1. get the name of method as the diagram standart //</span>
<a name="l00296"></a>00296         $strClass               = <a class="code" href="class_coruja_class_manipulation.html#23c359d165b1c05df05d804b29f5abec">CorujaClassManipulation::getClassNameFromClassDefinition</a>( $strClassDefinition );
<a name="l00297"></a>00297         $arrMethod      = explode( <span class="stringliteral">"::"</span> , $strMethod );
<a name="l00298"></a>00298         $strMethod              = array_pop( $arrMethod );
<a name="l00299"></a>00299         $strMethod      = $this-&gt;<a class="code" href="class_code_instrumentation_receiver.html#20bedeec5c454d58b3b5a3b579225323">renameMethod</a>( $strMethod );
<a name="l00300"></a>00300 
<a name="l00301"></a>00301         <span class="comment">// 2. get the namespace name //</span>
<a name="l00302"></a>00302         $strNamespace   = <a class="code" href="class_coruja_class_manipulation.html#51aa4116399c4188565dcdc16a1d71b6">CorujaClassManipulation::getNamespaceFromClassDefinition</a>( $strClassDefinition );
<a name="l00303"></a>00303 
<a name="l00304"></a>00304         <span class="keywordflow">if</span>( ! array_key_exists( $strClass, $this-&gt;arrClasses ) )
<a name="l00305"></a>00305         {
<a name="l00306"></a>00306             $this-&gt;arrClasses[ $strClass ] = 0;
<a name="l00307"></a>00307         }
<a name="l00308"></a>00308 
<a name="l00309"></a>00309         <span class="comment">// 3. get the actor what the message is bring from  //</span>
<a name="l00310"></a>00310         $objActorFrom = current( $this-&gt;arrStack );
<a name="l00311"></a>00311 
<a name="l00312"></a>00312         <span class="comment">// 4. get the actor what the message is bring to //</span>
<a name="l00313"></a>00313         <span class="keywordflow">if</span>( ! array_key_exists( $uid , $this-&gt;arrActors ) )
<a name="l00314"></a>00314         {
<a name="l00315"></a>00315                 <span class="comment">// 4.1 create the actor to if he not exists //</span>
<a name="l00316"></a>00316             $this-&gt;arrClasses[ $strClass ]++;
<a name="l00317"></a>00317             $objActorTo = <span class="keyword">new</span> <a class="code" href="class_xml_sequence_actor.html">XmlSequenceActor</a>();
<a name="l00318"></a>00318             $objActorTo-&gt;setType( <span class="stringliteral">'system'</span> );
<a name="l00319"></a>00319             $objActorTo-&gt;setClassName($strClass);
<a name="l00320"></a>00320             $objActorTo-&gt;setName( $strClass . <span class="charliteral">'('</span> . $this-&gt;arrClasses[ $strClass ] . <span class="charliteral">')'</span>);
<a name="l00321"></a>00321             $objActorTo-&gt;setId(<span class="keyword">sizeof</span>( $this-&gt;arrActors ) + 1  );
<a name="l00322"></a>00322             $this-&gt;arrActors[ $uid ] = $objActorTo;
<a name="l00323"></a>00323             $this-&gt;objXmlSequence-&gt;addActor($objActorTo);
<a name="l00324"></a>00324         }
<a name="l00325"></a>00325         <span class="keywordflow">else</span>
<a name="l00326"></a>00326         {
<a name="l00327"></a>00327             $objActorTo = $this-&gt;arrActors[ $uid ];
<a name="l00328"></a>00328         }
<a name="l00329"></a>00329 
<a name="l00330"></a>00330         <span class="comment">// 5. create the message //</span>
<a name="l00331"></a>00331         $objMessage = <span class="keyword">new</span> <a class="code" href="class_xml_sequence_message.html">XmlSequenceMessage</a>();
<a name="l00332"></a>00332 
<a name="l00333"></a>00333         <span class="comment">// 5.1 set the message attributes //</span>
<a name="l00334"></a>00334         $objMessage-&gt;setText( $strMethod );
<a name="l00335"></a>00335         $objMessage-&gt;setActorFrom( $objActorFrom );
<a name="l00336"></a>00336         $objMessage-&gt;setActorTo( $objActorTo );
<a name="l00337"></a>00337         $objMessage-&gt;setType( <span class="stringliteral">'call'</span> );
<a name="l00338"></a>00338         
<a name="l00339"></a>00339         <span class="comment">// 5.2 set the message values //</span>
<a name="l00340"></a>00340         <span class="keywordflow">foreach</span>( $arrArguments as $strName =&gt; $mixValue )
<a name="l00341"></a>00341         {
<a name="l00342"></a>00342             $objValue = <span class="keyword">new</span> <a class="code" href="class_xml_sequence_value.html">XmlSequenceValue</a>();
<a name="l00343"></a>00343             $objValue-&gt;setName( <span class="charliteral">'['</span> . $strName  . <span class="charliteral">']'</span>);
<a name="l00344"></a>00344             $objValue-&gt;setValue( serialize( $mixValue ) );
<a name="l00345"></a>00345             $objMessage-&gt;addValue( $objValue );
<a name="l00346"></a>00346         }
<a name="l00347"></a>00347         $objMessage-&gt;setTimeStart( microtime( <span class="keyword">true</span> ) );
<a name="l00348"></a>00348         
<a name="l00349"></a>00349         <span class="comment">// 6. append the message  //</span>
<a name="l00350"></a>00350         $this-&gt;objXmlSequence-&gt;addMessage( $objMessage );
<a name="l00351"></a>00351 
<a name="l00352"></a>00352         $this-&gt;arrMessages[]    = $objMessage;
<a name="l00353"></a>00353         array_unshift( $this-&gt;arrStack , $objActorTo );
<a name="l00354"></a>00354 
<a name="l00355"></a>00355         <span class="keywordflow">return</span> $this;
<a name="l00356"></a>00356     }
<a name="l00357"></a>00357 
<a name="l00376"></a><a class="code" href="class_code_instrumentation_receiver.html#857c9dfbe06ad7cd878585408b1c3d98">00376</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#857c9dfbe06ad7cd878585408b1c3d98">onLeaveMethod</a>( $uid , $strClassDefinition, $strMethod, $mixReturn )
<a name="l00377"></a>00377     {
<a name="l00378"></a>00378         <span class="comment">// 1. get the name of method as the diagram standart //</span>
<a name="l00379"></a>00379         $strClass               = <a class="code" href="class_coruja_class_manipulation.html#23c359d165b1c05df05d804b29f5abec">CorujaClassManipulation::getClassNameFromClassDefinition</a>( $strClassDefinition );
<a name="l00380"></a>00380         $arrMethod      = explode( <span class="stringliteral">"::"</span> , $strMethod );
<a name="l00381"></a>00381         $strMethod              = array_pop( $arrMethod );
<a name="l00382"></a>00382         $strMethod      = $this-&gt;<a class="code" href="class_code_instrumentation_receiver.html#20bedeec5c454d58b3b5a3b579225323">renameMethod</a>( $strMethod );
<a name="l00383"></a>00383         
<a name="l00384"></a>00384         <span class="comment">// 2. get the namespace name //</span>
<a name="l00385"></a>00385         $strNamespace   = <a class="code" href="class_coruja_class_manipulation.html#51aa4116399c4188565dcdc16a1d71b6">CorujaClassManipulation::getNamespaceFromClassDefinition</a>( $strClassDefinition );
<a name="l00386"></a>00386 
<a name="l00387"></a>00387         <span class="comment">// 3. get the actor what the message is bring from //</span>
<a name="l00388"></a>00388         $objActorFrom = array_shift( $this-&gt;arrStack );
<a name="l00389"></a>00389 
<a name="l00390"></a>00390         <span class="comment">// 4. get the actor what the message is bring to //</span>
<a name="l00391"></a>00391         $objActorTo = current( $this-&gt;arrStack );
<a name="l00392"></a>00392 
<a name="l00393"></a>00393         <span class="keywordflow">if</span>( $mixReturn != null or !$this-&gt;booIgnoreNullReturns)
<a name="l00394"></a>00394         {
<a name="l00395"></a>00395                 <span class="comment">// 5. create the message //</span>
<a name="l00396"></a>00396             $objMessage = <span class="keyword">new</span> <a class="code" href="class_xml_sequence_message.html">XmlSequenceMessage</a>();
<a name="l00397"></a>00397             
<a name="l00398"></a>00398             <span class="comment">// 5.1 set the message attributes //</span>
<a name="l00399"></a>00399             $objMessage-&gt;setText( $strMethod );
<a name="l00400"></a>00400             $objMessage-&gt;setActorFrom( $objActorFrom );
<a name="l00401"></a>00401             $objMessage-&gt;setActorTo( $objActorTo );
<a name="l00402"></a>00402             $objMessage-&gt;setType( <span class="stringliteral">'return'</span> );
<a name="l00403"></a>00403 
<a name="l00404"></a>00404             <span class="comment">// 5.2 set the message values //</span>
<a name="l00405"></a>00405             <span class="keywordflow">if</span>( $mixReturn !== null )
<a name="l00406"></a>00406             {
<a name="l00407"></a>00407                 $objValue = <span class="keyword">new</span> <a class="code" href="class_xml_sequence_value.html">XmlSequenceValue</a>();
<a name="l00408"></a>00408                 $objValue-&gt;setName( <span class="stringliteral">"[return]"</span> );
<a name="l00409"></a>00409                 $objValue-&gt;setValue( serialize( $mixReturn ) );
<a name="l00410"></a>00410                 $objMessage-&gt;addValue( $objValue );
<a name="l00411"></a>00411             }
<a name="l00412"></a>00412 
<a name="l00413"></a>00413             <span class="comment">// 6. append the message  //</span>
<a name="l00414"></a>00414             $this-&gt;objXmlSequence-&gt;addMessage( $objMessage );
<a name="l00415"></a>00415             $objMessage-&gt;setTimeEnd( microtime( <span class="keyword">true</span> ) );
<a name="l00416"></a>00416         }
<a name="l00417"></a>00417         <span class="keywordflow">return</span> $this;
<a name="l00418"></a>00418     }
<a name="l00419"></a>00419 
<a name="l00425"></a><a class="code" href="class_code_instrumentation_receiver.html#feb0ab0d5955fcae20ff5062fa59fd79">00425</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#feb0ab0d5955fcae20ff5062fa59fd79">getXmlSequence</a>()
<a name="l00426"></a>00426     {
<a name="l00427"></a>00427         <span class="keywordflow">return</span> $this-&gt;objXmlSequence;
<a name="l00428"></a>00428     }
<a name="l00429"></a>00429 
<a name="l00442"></a><a class="code" href="class_code_instrumentation_receiver.html#c8de9e38ce27c87f710dff42a13455cf">00442</a>     <span class="keyword">public</span> function <a class="code" href="class_code_instrumentation_receiver.html#c8de9e38ce27c87f710dff42a13455cf">restart</a>()
<a name="l00443"></a>00443     {
<a name="l00444"></a>00444         <span class="comment">// 1. clean actors //</span>
<a name="l00445"></a>00445         $this-&gt;arrActors = array();
<a name="l00446"></a>00446         <span class="comment">// 2. clean classes //</span>
<a name="l00447"></a>00447         $this-&gt;arrClasses = array();
<a name="l00448"></a>00448         <span class="comment">// 3. clean messages //</span>
<a name="l00449"></a>00449         $this-&gt;arrMessages = array();
<a name="l00450"></a>00450         <span class="comment">// 4. clean stack //</span>
<a name="l00451"></a>00451         $this-&gt;arrStack = array();
<a name="l00452"></a>00452         <span class="comment">// 5. clean object xml sequence //</span>
<a name="l00453"></a>00453         $this-&gt;objXmlSequence-&gt;restart();
<a name="l00454"></a>00454         <span class="comment">// 6. restart the receiver //</span>
<a name="l00455"></a>00455         $this-&gt;<a class="code" href="class_code_instrumentation_receiver.html#095c5d389db211932136b53f25f39685">__construct</a>();
<a name="l00456"></a>00456         <span class="keywordflow">return</span> $this;
<a name="l00457"></a>00457     }
<a name="l00458"></a>00458 }
<a name="l00459"></a>00459 
<a name="l00460"></a>00460 ?&gt;
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat May 2 20:59:08 2009 for CodeToDiagram by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
